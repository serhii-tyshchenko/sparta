(this["webpackJsonpparcel-tracker"]=this["webpackJsonpparcel-tracker"]||[]).push([[0],{104:function(e,t,a){},288:function(e,t,a){},289:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(96),l=a.n(c),s=(a(104),a(52)),o=a(15),i=a(16),u=a(18),p=a(17),m=function(){return n.a.createElement("header",null,n.a.createElement("div",{className:"wrapper header"},n.a.createElement("h2",{className:"header__logo"},"Simple Parcel Tracking App")))},h=function(){return n.a.createElement("footer",null,n.a.createElement("div",{className:"wrapper"},"\xa9 Serhii Tyshchenko, 2019"))},d=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={query:""},e.handleChange=function(t){e.setState({query:t.target.value})},e.handleSubmit=function(t){t.preventDefault(),""!==e.state.query?(e.props.addParcel(e.state.query),e.setState({query:""})):alert("Empty query!")},e}return Object(i.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"search"},n.a.createElement("form",{className:"search__form",onSubmit:this.handleSubmit},n.a.createElement("input",{className:"search__input",value:this.state.query,type:"text",name:"",placeholder:"Enter parcel number",onChange:this.handleChange,pattern:"^\\d{14}",title:"14 numbers"}),n.a.createElement("button",{className:"search__btn"},"Track")),n.a.createElement("div",{style:{flexBasis:"100%",textAlign:"center"}},n.a.createElement("small",null,"try 20450182437180")))}}]),a}(r.Component),f=a(97),v=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={title:e.props.parcel.title||"unknown",color:e.props.parcel.color||"#fff",displayColorPicker:!1},e.handleTitleChange=function(t){e.setState({title:t.target.value})},e.handleKeyDown=function(t){"Enter"===t.key&&e.props.editParcel(e.props.parcel.number,"title",t.target.value)},e.handleColorChange=function(t){var a=Object.values(t.hex).join(""),r=e.props.parcel.number;e.setState({color:a}),e.props.editParcel(r,"color",a)},e.handleClick=function(){e.setState({displayColorPicker:!e.state.displayColorPicker})},e.handleClose=function(){e.setState({displayColorPicker:!1})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.parcel,t=e.number,a=e.status,r=e.date,c=e.cityRecipient,l=e.citySender,s=this.state.title,o=this.state.color;return n.a.createElement("li",{className:"parcels__item parcel",style:{backgroundColor:o}},n.a.createElement("div",{className:"parcel__header"},n.a.createElement("input",{type:"text",value:this.state.title,className:"parcel__title",onChange:this.handleTitleChange,onKeyDown:this.handleKeyDown,onBlur:this.props.editParcel.bind(this,t,"title",s)}),n.a.createElement("div",{className:"parcel__controls"},n.a.createElement("button",{className:"parcel__btn icon-color-adjust",onClick:this.handleClick,title:"Change parcel color"},this.state.displayColorPicker?n.a.createElement(f.GithubPicker,{color:this.state.color,onChange:this.handleColorChange,triangle:"top-right"}):null),n.a.createElement("button",{onClick:this.props.getParcelStatus.bind(this,t),title:"Update parcel status",className:"parcel__btn parcel__update icon-arrows-cw"}),n.a.createElement("button",{onClick:this.props.removeParcel.bind(this,t),title:"Remove parcel",className:"parcel__btn parcel__remove icon-trash-empty"}))),n.a.createElement("div",{className:"parcel__details"},n.a.createElement("h3",{className:"parcel__number"},t),l?n.a.createElement("div",{className:"parcel__route icon-location"},l," - ",c):null,n.a.createElement("div",{className:"parcel__date icon-calendar"},r),n.a.createElement("div",{className:"parcel__status"},a)))}}]),a}(r.Component),y=function(e){var t=e.parcels,a=e.getParcelStatus,r=e.editParcel,c=e.removeParcel,l=e.setParcelColor;return n.a.createElement("div",{className:"parcels"},n.a.createElement("ul",{className:"parcels__list"},t.map((function(e){return n.a.createElement(v,{parcel:e,key:e.number,getParcelStatus:a,editParcel:r,removeParcel:c,setParcelColor:l})}))))},b=a(98),g=a.n(b),E=function(e){return g.a.post("https://api.novaposhta.ua/v2.0/json/",{apiKey:"",modelName:"TrackingDocument",calledMethod:"getStatusDocuments",methodProperties:{Documents:[{DocumentNumber:e,Phone:""}]}}).then((function(e){return function(e){var t=e.data.data[0];return{number:t.Number,citySender:t.CitySender,cityRecipient:t.CityRecipient,payer:t.PayerType,status:t.Status,date:t.ActualDeliveryDate||(new Date).toLocaleString()}}(e)})).catch((function(e){return console.log(e)}))},_=(a(288),function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={parcels:[]},e.numberExists=function(e,t){return e.some((function(e){return e.number===t}))},e.addParcel=function(t){e.numberExists(e.state.parcels,t)?alert("Parcel already added!"):E(t).then((function(t){var a=t;a.title="untitled",a.color="white",e.setState({parcels:[].concat(Object(s.a)(e.state.parcels),[a])})})).catch((function(e){return console.log(e)}))},e.removeParcel=function(t){e.setState({parcels:Object(s.a)(e.state.parcels.filter((function(e){return e.number!==t})))})},e.editParcel=function(t,a,r){e.setState({parcels:e.state.parcels.map((function(e){return e.number===t&&(e[a]=r),e}))})},e.getParcelStatus=function(t){E(t).then((function(a){e.setState({parcels:e.state.parcels.map((function(e){return e.number===t&&(e.status=a.status),e}))})}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.setState(localStorage.getItem("parcelList")?JSON.parse(localStorage.getItem("parcelList")):{parcels:[]})}},{key:"componentDidUpdate",value:function(){var e;e=this.state,localStorage.setItem("parcelList",JSON.stringify(e))}},{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement(m,null),n.a.createElement("main",{className:"wrapper"},n.a.createElement(d,{addParcel:this.addParcel}),n.a.createElement(y,{getParcelStatus:this.getParcelStatus,removeParcel:this.removeParcel,editParcel:this.editParcel,parcels:this.state.parcels})),n.a.createElement(h,null))}}]),a}(r.Component));l.a.render(n.a.createElement(_,null),document.getElementById("root"))},99:function(e,t,a){e.exports=a(289)}},[[99,1,2]]]);
//# sourceMappingURL=main.049976a4.chunk.js.map